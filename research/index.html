<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Context‚ÄëAware MFA ‚Äî IP Spoofing & Trust Scores</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <script defer data-domain="mcmad1325.github.io" src="https://plausible.io/js/script.js"></script>
  <style>
    :root{
      --bg: #0b0d12;
      --panel: rgba(255,255,255,0.06);
      --text: #e6e7eb;
      --muted: #9aa3b2;
      --brand: #8b5cf6;
      --brand-2: #06b6d4;
      --ok: #22c55e;
      --warn: #f59e0b;
      --bad: #ef4444;
      --card-bd: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family: Inter, system-ui; color:var(--text); background:#0b0d12;}
    a{color:inherit}
    .wrap{max-width:1100px; margin:0 auto; padding:24px}
    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(120%) blur(8px);background:rgba(11,13,18,.9);border-bottom:1px solid var(--card-bd)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--card-bd);background:var(--panel);cursor:pointer}
    .hero{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:center;padding:32px 0}
    .badge{display:inline-flex;gap:8px;align-items:center;background:rgba(139,92,246,.12);color:#dcd2ff;border:1px solid rgba(139,92,246,.4);border-radius:999px;padding:6px 12px;font-weight:600}
    h2{font-size:32px;margin:14px 0}
    .lead{color:var(--muted);line-height:1.6}
    .glass{background:var(--panel);border:1px solid var(--card-bd);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    .muted{color:var(--muted)}
    footer{margin:40px 0 20px;color:var(--muted);text-align:center}
    @media(max-width:900px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <a class="btn" href="../index.html">‚Üê Back</a>
      <span class="btn" id="copyLink">üîó Copy link</span>
    </div>
  </header>
  <main class="wrap">
    <section class="hero">
      <div>
        <span class="badge">Context‚ÄëAware MFA ‚Ä¢ IP Spoofing Defense</span>
        <h2>Interactive Trust Scoring Concept</h2>
        <p class="lead">Visualizing overlap, overseas impact, and noise ‚Äî without exposing sensitive code.</p>
        <div class="glass" style="margin-top:20px">
          <small class="muted">AUC (est.)</small>
          <div id="aucVal" style="font-size:28px;font-weight:800">0.93</div>
        </div>
      </div>
      <div class="glass">
        <h3>Trust Overlap Demo</h3>
        <div style="height:18px;background:rgba(255,255,255,.06);border:1px solid var(--card-bd);border-radius:999px;position:relative;overflow:hidden">
          <div id="distA" style="position:absolute;top:0;bottom:0"></div>
          <div id="distB" style="position:absolute;top:0;bottom:0"></div>
        </div>
        <div id="ovlText" class="muted" style="margin-top:8px">Estimated overlap: 0.04</div>
        <div class="grid" style="margin-top:12px">
          <label class="muted">Normal center<input type="range" min="20" max="70" value="60" id="aRange"></label>
          <label class="muted">Attacker center<input type="range" min="5" max="40" value="25" id="bRange"></label>
        </div>
      </div>
    </section>
    <section class="grid">
      <div class="glass">
        <h3>What‚ÄëIf Controls</h3>
        <label class="muted">Overseas session mix (%)<input type="range" min="0" max="30" value="5" id="mixRange"></label>
        <label class="muted">Ambient noise (concept)<input type="range" min="0" max="20" value="5" id="noiseRange"></label>
        <div class="glass" style="margin-top:12px;text-align:center">
          <small class="muted">Risk Dial</small>
          <div id="dial" style="width:120px;height:120px;border-radius:60px;margin:8px auto;border:1px solid var(--card-bd)"></div>
          <div id="dialText" class="muted">Overseas: 5%</div>
        </div>
      </div>
      <div class="glass">
        <h3>Insights</h3>
        <ul>
          <li>Greater distance between groups lowers overlap.</li>
          <li>More overseas mix increases overall risk.</li>
          <li>Noise requires buffer margins to keep overlap under 5%.</li>
        </ul>
      </div>
    </section>
    <footer>¬© <span id="yr"></span> Justin Schlag ‚Ä¢ Context‚ÄëAware MFA Research</footer>
  </main>
  <script>
    // ===== Unified Script (no duplicate declarations) =====
    // Copy link
    (function(){
      const cp = document.getElementById('copyLink');
      if (cp) cp.addEventListener('click', async () => {
        try { await navigator.clipboard.writeText(location.href); } catch {}
        const txt = cp.innerHTML; cp.innerHTML = '‚úÖ Copied';
        setTimeout(()=> cp.innerHTML = txt, 1200);
      });
    })();

    // Year
    (function(){ const y = document.getElementById('yr'); if (y) y.textContent = new Date().getFullYear(); })();

    // Tabs (if present)
    (function(){
      const tabs = document.querySelectorAll('.tab');
      const panels = {
        det: document.getElementById('tab-det'),
        overseas: document.getElementById('tab-overseas'),
        overlap: document.getElementById('tab-overlap')
      };
      if (tabs.length){
        tabs.forEach(t => t.addEventListener('click', () => {
          tabs.forEach(x => x.setAttribute('aria-selected', String(x===t)));
          Object.values(panels).forEach(p => p && (p.hidden = true));
          panels[t.dataset.tab] && (panels[t.dataset.tab].hidden = false);
        }));
      }
    })();

    // Interactive Lab ‚Äî single source of truth
    (function(){
      const aRange = document.getElementById('aRange');
      const bRange = document.getElementById('bRange');
      const mixRange = document.getElementById('mixRange');
      const noiseRange = document.getElementById('noiseRange');
      const distA = document.getElementById('distA');
      const distB = document.getElementById('distB');
      const ovlText = document.getElementById('ovlText');
      const aucVal = document.getElementById('aucVal');
      const dial = document.getElementById('dial');
      const dialText = document.getElementById('dialText');

      function styleDist(el, leftPct, widthPct, gradA, gradB){
        if (!el) return;
        el.style.left = leftPct + '%';
        el.style.width = widthPct + '%';
        el.style.background = `linear-gradient(90deg, ${gradA}, ${gradB})`;
        el.style.borderRight = '1px solid rgba(255,255,255,.08)';
        el.style.position = 'absolute';
        el.style.top = '0';
        el.style.bottom = '0';
      }

      function render(){
        if (!(aRange && bRange)) return;
        const aCenter = +aRange.value; // normal users
        const bCenter = +bRange.value; // attackers
        const width = 24; // conceptual spread
        const aL = Math.max(0, aCenter - width/2);
        const bL = Math.max(0, bCenter - width/2);
        styleDist(distA, aL, width, 'rgba(6,182,212,.7)', 'rgba(6,182,212,.2)');
        styleDist(distB, bL, width, 'rgba(139,92,246,.7)', 'rgba(139,92,246,.2)');

        const d = Math.abs(aCenter - bCenter);
        const noise = noiseRange ? (+noiseRange.value / 100) : 0;
        const overseas = mixRange ? (+mixRange.value / 100) : 0.05;

        // Overlap (illustrative only)
        const baseOvl = Math.max(0, (width - d)/width);
        const ovlShown = Math.min(1, baseOvl + noise*0.5 + overseas*0.2);
        if (ovlText){
          ovlText.textContent = `Estimated overlap: ${ovlShown.toFixed(2)}`;
          ovlText.style.color = ovlShown <= 0.05 ? 'var(--ok)' : (ovlShown < 0.15 ? 'var(--warn)' : 'var(--bad)');
        }

        // AUC heuristic (visual only)
        const auc = Math.max(.70, Math.min(.99, 0.75 + (d/40) - noise*0.2 - overseas*0.15));
        if (aucVal) aucVal.textContent = auc.toFixed(2);

        // Risk dial
        if (dial && dialText){
          const deg = Math.min(270, 90 + overseas*270);
          dial.style.background = `conic-gradient(var(--bad) 0 ${deg}deg, rgba(255,255,255,.08) ${deg}deg 360deg)`;
          dialText.textContent = `Overseas: ${Math.round(overseas*100)}%`;
        }
      }

      ['input','change'].forEach(evt => {
        aRange && aRange.addEventListener(evt, render);
        bRange && bRange.addEventListener(evt, render);
        mixRange && mixRange.addEventListener(evt, render);
        noiseRange && noiseRange.addEventListener(evt, render);
      });

      render();
    })();
  </script>
</body>
</html>
